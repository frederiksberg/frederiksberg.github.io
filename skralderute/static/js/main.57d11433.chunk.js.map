{"version":3,"sources":["components/Navbar.js","components/Infobox.js","components/RouteInfo.js","components/WaypointList.js","components/Popup.js","components/TrashSlider.js","components/Loading.js","components/SignIn.js","config.js","components/Map.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","root","flexGrow","appbar","backgroundColor","title","textAlign","fontFamily","Navbar","classes","className","AppBar","position","Toolbar","Typography","variant","button","bottom","right","zIndex","AlertDialog","React","useState","open","setOpen","handleClose","Fab","color","aria-label","onClick","fontSize","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","alt","width","src","href","target","rel","DialogActions","Button","autoFocus","RouteInfo","props","stops","distance","duration","header","margin","padding","list","btn","WaypointList","side","top","left","state","setState","toggleDrawer","event","type","key","Drawer","anchor","role","onKeyDown","Divider","List","waypoints","sort","a","b","waypoint_index","map","item","ListItem","onMouseEnter","entered","onMouseLeave","leaved","clicked","lng","lat","ListItemText","primary","address","split","bullet","display","transform","pos","marginBottom","valueCell","wordBreak","Popup","data","location","JSON","parse","Card","card","CardContent","gutterBottom","waste_distance","CardActions","IconButton","style","marginLeft","window","size","maxWidth","PrettoSlider","withStyles","background","paddingTop","paddingBottom","borderRadius","height","thumb","border","marginTop","boxShadow","active","valueLabel","track","rail","Slider","valuetext","value","RangeSlider","setValue","onChange","_","newValue","changed","valueLabelDisplay","getAriaValueText","ColorLinearProgress","colorPrimary","barColorPrimary","LinearProgress","LinearQuery","paper","spacing","flexDirection","alignItems","avatar","palette","secondary","main","form","submit","SignIn","login","setLogin","DialogContentText","Container","component","CssBaseline","noValidate","TextField","e","user","required","fullWidth","label","name","autoComplete","password","FormControlLabel","control","Checkbox","preventDefault","config","mapboxAccessToken","wasteControl","url","osrm","origin","styles","layerStyles","layout","paint","property","Map","setMap","popup","setPopup","containers","setContainers","containersStops","setContainersStops","routeInfo","setRouteInfo","loading","setLoading","token","setToken","mapContainer","useRef","useEffect","mapboxgl","accessToken","container","current","center","zoom","attributionControl","on","resize","addControl","MapboxTraffic","remove","getCanvas","cursor","addPopup","features","properties","lngLat","initializeMap","localStorage","setItem","getContainers","removeLayers","filtered","filter","i","include","length","containerFeatures","toGeoJSON","addLayer","locations","getRoute","then","route","joined","nearest","nearestPoint","point","timer","el","placeholder","document","createElement","ReactDOM","render","_popup","closeButton","setDOMContent","setLngLat","addTo","jwt","axios","get","params","headers","res","cnt","catch","error","console","log","join","Math","round","trips","num","floor","index","geometry","firstSymbolId","layers","getStyle","addSource","Array","isArray","forEach","getSource","removeLayer","removeSource","post","username","response","authenticate","ref","feature","flyTo","min","max","clearTimeout","setTimeout","App","Boolean","hostname","match","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.57d11433.chunk.js","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1,\n    },\n    appbar: {\n        backgroundColor: 'rgb(37, 167, 167)',\n        },\n    title: {\n        flexGrow: 1,\n        textAlign: 'center',\n        fontFamily: \"'Fredericka the Great', cursive\"\n    },\n}));\n\nexport default function Navbar() {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" className={classes.appbar}>\n                <Toolbar>\n                    <Typography variant=\"h4\" className={classes.title}>\n                        TRIPPIN\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n        </div>\n    );\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Fab } from '@material-ui/core';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst useStyles = makeStyles(theme => ({\n    button: {\n        position: \"fixed\",\n        bottom: 15,\n        right: 10,\n        zIndex: 200,\n        backgroundColor: 'rgb(37, 167, 167)'\n    }\n}));\n\nexport default function AlertDialog() {\n    const classes = useStyles();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    return (\n        <div>\n            <Fab className={classes.button} color=\"primary\" aria-label=\"add\" onClick={handleClickOpen}>\n                <InfoIcon fontSize='large' />\n            </Fab>\n            <Dialog\n                open={open}\n                onClose={handleClose}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle id=\"alert-dialog-title\">{\"Velkommen\"}</DialogTitle>\n                <DialogContent>\n                        <p>Ruteoptimering til tømning af glascontainere ud fra fyldningsgrad som måles med sensorer</p>\n                        <ul>\n                            <li>Tryk på <img alt=\"trafic\" width=\"25px\" src=\"data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%23333333%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%20viewBox%3D%22-2%20-2%2022%2022%22%3E%0D%0A%3Cpath%20d%3D%22M13%2C4.1L12%2C3H6L5%2C4.1l-2%2C9.8L4%2C15h10l1-1.1L13%2C4.1z%20M10%2C13H8v-3h2V13z%20M10%2C8H8V5h2V8z%22%2F%3E%0D%0A%3C%2Fsvg%3E\" /> for at få vist trafikken</li>\n                        </ul>\n                        <p>Bruger <a href=\"http://project-osrm.org/\" target=\"_blank\" rel=\"noopener noreferrer\">OSRM</a> til at løse Travelling Salesman problemet med data fra Open Street Map.</p>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\" autoFocus>\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n}","import React from 'react'\n\nconst RouteInfo = (props) => {\n    return (\n        <div className='route-info'>\n            <table>\n                <tbody>                    \n                    <tr>\n                        <td>Antal stops</td>\n                        <td>{props.stops}</td>\n                    </tr>\n                    <tr>\n                        <td>Længde</td>\n                        <td>{props.distance} km</td>\n                    </tr>\n                    <tr>\n                        <td>Tid</td>\n                        <td>{props.duration}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\nexport default RouteInfo\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport { Fab, Divider } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListIcon from '@material-ui/icons/List';\n\nconst useStyles = makeStyles({\n    header: {\n        textAlign: 'center',\n        margin: 0,\n        padding: 17,\n        color: 'white',\n        backgroundColor: 'rgb(37, 167, 167)'\n    },\n    list: {\n        width: 250\n    },\n    btn: {\n        position: \"fixed\",\n        bottom: 85,\n        right: 10,\n        zIndex: 100,\n        backgroundColor: 'rgb(37, 167, 167)'\n    }\n});\n\nexport default function WaypointList(props) {\n    const classes = useStyles();\n    const [state, setState] = React.useState({\n        top: false,\n        left: false,\n        bottom: false,\n        right: false,\n    });\n\n    \n\n    const toggleDrawer = (side, open) => event => {\n        if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n            return;\n        }\n\n        setState({ ...state, [side]: open });\n    };\n\n    const sideList = side => (\n        <div\n            className={classes.list}\n            role=\"presentation\"\n            onClick={toggleDrawer(side, false)}\n            onKeyDown={toggleDrawer(side, false)}\n        >\n            <h3 className={classes.header}>Stop på ruten</h3>\n            <Divider />\n            <List>\n                {props.waypoints.sort((a, b) => (a.waypoint_index > b.waypoint_index) ? 1 : -1).map((item, id) => (\n                    <ListItem button key={id} onMouseEnter={() => props.entered(item)} onMouseLeave={() => props.leaved(item)} onClick={() => props.clicked([item.lng, item.lat])} >\n                        {/* <ListItemIcon>\n                            <DeleteIcon />\n                        </ListItemIcon> */}\n                        <ListItemText primary={item.address ? `${item.waypoint_index}. ${item.address.split(',')[0]}` : `${item.waypoint_index}. Ukendt vejnavn`} />\n                    </ListItem>\n                ))}\n            </List>\n        </div>\n    );\n\n    return (\n        <div>\n            <Fab className={classes.btn} color=\"primary\" aria-label=\"add\" onClick={toggleDrawer('right', true)}>\n                <ListIcon fontSize='large' />\n            </Fab>\n\n            <Drawer anchor=\"right\" open={state.right} onClose={toggleDrawer('right', false)}>\n                {sideList('right')}\n            </Drawer>\n        </div>\n    );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport DirectionsIcon from '@material-ui/icons/Directions';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        color: 'white'\n    },\n    // card: {\n    //     minWidth: 275,\n    // },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n    valueCell: {\n        wordBreak: \"break-word\",\n        padding: '8px !important'\n    }\n}));\n\nexport default function Popup(props) {\n    const classes = useStyles();\n    \n    // eslint-disable-next-line no-unused-vars\n    let location;\n    if (typeof props.data.location === \"string\") {\n        location = JSON.parse(props.data.location)\n    } else {\n        location = props.data.location\n    }\n\n    let lat = props.data.lat\n    let lng = props.data.lng\n\n    return (\n        <div className={classes.root}>\n            <Card className={classes.card} variant=\"outlined\">\n                <CardContent>\n                    <Typography className={classes.title} color=\"textPrimary\" gutterBottom>\n                        Fyldningsgrad: {props.data.waste_distance}%\n                    </Typography>\n                    <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n                        {props.data.address.split(',')[0]}\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                    <IconButton style={{marginLeft: 'auto'}} onClick={() => window.open(`http://maps.google.com?daddr=${lat},${lng}&amp;ll=`)} size=\"small\"><DirectionsIcon /></IconButton>\n                </CardActions>\n            </Card>\n        </div>\n    );\n}","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\n\nconst useStyles = makeStyles({\n    root: {\n        width: 400,\n        maxWidth: 'calc(80vw - 45px) !important',\n        position: 'fixed',\n        bottom: 10,\n        left: 10,\n        margin: 'auto',\n        zIndex: 100,\n        backgroundColor: 'rgba(255,255,255,0.3)',\n        padding: 20,\n        color: 'grey'\n    },\n    button: {\n        backgroundColor: 'rgb(22,200,200)',\n    }\n});\n\nconst PrettoSlider = withStyles({\n    root: {\n        color: 'grey',\n        background: 'linear-gradient(90deg, rgba(4,252,35,1) 0%, rgba(255,250,6,1) 50%, rgba(247,0,0,1) 100%)',\n        paddingTop: 3,\n        paddingBottom: 3,\n        borderRadius: 10,\n        height: 8,\n    },\n    thumb: {\n        height: 24,\n        width: 24,\n        backgroundColor: '#fff',\n        border: '2px solid currentColor',\n        marginTop: -8,\n        marginLeft: -12,\n        '&:focus,&:hover,&$active': {\n            boxShadow: 'inherit',\n        },\n    },\n    active: {},\n    valueLabel: {\n        left: 'calc(-50% + 4px)',\n    },\n    track: {\n        top: 5,\n        height: 4,\n        borderRadius: 4,\n    },\n    rail: {\n        top: 5,\n        height: 4,\n        borderRadius: 4,\n    },\n})(Slider);\n\nfunction valuetext(value) {\n    return `${value}%`;\n}\n\nexport default function RangeSlider(props) {\n    const classes = useStyles();\n    const [value, setValue] = React.useState([0, 100]);\n\n    const handleChange = (_, newValue) => {\n        setValue(newValue)\n        props.changed(newValue[0], newValue[1])\n    };\n\n    return (\n        <div className={classes.root}>\n            <Typography style={{textAlign: 'center'}} id=\"range-slider\" gutterBottom>\n                Fyldningsgrad\n            </Typography>\n            <PrettoSlider\n                value={value}\n                onChange={handleChange}\n                valueLabelDisplay=\"on\"\n                aria-labelledby=\"range-slider\"\n                getAriaValueText={valuetext}\n            />\n        </div>\n    );\n}","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst ColorLinearProgress = withStyles({\n    colorPrimary: {\n      backgroundColor: '#b2dfdb',\n    },\n    barColorPrimary: {\n      backgroundColor: '#00695c',\n    },\n  })(LinearProgress);\n  \nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'fixed',\n        top: 56,\n        zIndex: 1,\n        width: '100%',\n    },\n}));\n\nexport default function LinearQuery() {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <ColorLinearProgress />\n        </div>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nconst useStyles = makeStyles(theme => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n        backgroundColor: 'rgb(22,200,200)'\n    },\n}));\n\nexport default function SignIn(props) {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(true);\n    const [login, setLogin] = React.useState({});\n\n     const handleUserChange = e =>  {\n        setLogin({...login, user: e.target.value});\n     }\n\n     const handlePasswordChange = e => {\n        setLogin({...login, password: e.target.value});\n     }\n\n    const handleSignIn = e => {\n        e.preventDefault()\n        setOpen(false);\n        props.clicked(login)\n    };\n\n    return (\n        <div>\n            <Dialog\n                open={open}\n                //onClose={handleClose}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        <Container component=\"main\" maxWidth=\"xs\">\n                            <CssBaseline />\n                            <div className={classes.paper}>\n                                <form className={classes.form} noValidate>\n                                    <TextField\n                                        onChange={handleUserChange}\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        id=\"user\"\n                                        label=\"Brugernavn\"\n                                        name=\"user\"\n                                        autoComplete=\"user\"\n                                        autoFocus\n                                    />\n                                    <TextField\n                                        onChange={handlePasswordChange}\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        required\n                                        fullWidth\n                                        name=\"password\"\n                                        label=\"Kodeord\"\n                                        type=\"password\"\n                                        id=\"password\"\n                                        autoComplete=\"current-password\"\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox value=\"remember\" color=\"primary\" />}\n                                        label=\"Husk mig\"\n                                    />\n                                    <Button\n                                        fullWidth\n                                        type=\"submit\"\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        className={classes.submit}\n                                        onClick={handleSignIn}\n                                    >\n                                        Log ind\n                                    </Button>\n                                </form>\n                            </div>\n                        </Container>\n                    </DialogContentText>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}","const config = {\n    mapboxAccessToken: 'pk.eyJ1IjoiZnJlZGVyaWtzYmVyZy1naXMiLCJhIjoiY2sydm5nZDRjMDZoMDNobzd5aDV1MGhzZiJ9.vnExgTJMSYvWSFA3FsBlRA',\n    wasteControl: {\n        url: 'https://api.wastecontrol.dk',\n    },\n    osrm: {\n        url: 'https://rute.frb-data.dk',\n        origin: [12.497710,55.669111]\n    }\n}\n\nexport default config","import React, { useEffect, useRef, useState } from \"react\";\nimport ReactDOM from 'react-dom'\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxTraffic from '@mapbox/mapbox-gl-traffic'\nimport axios from 'axios'\nimport RouteInfo from './RouteInfo';\nimport WaypointList from './WaypointList'\nimport Popup from './Popup'\nimport TrashSlider from './TrashSlider'\nimport Loading from './Loading'\nimport SignIn from './SignIn'\nimport nearestPoint from '@turf/nearest-point'\nimport { point } from '@turf/helpers'\n\nimport config from '../config'\n\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"@mapbox/mapbox-gl-traffic/mapbox-gl-traffic.css\"\n\nconst styles = {\n    width: \"100vw\",\n    height: \"calc(100vh - 56px)\",\n    position: \"absolute\"\n};\n\nconst layerStyles = {\n    route: {\n        layout: {\n            'line-join': 'round',\n            'line-cap': 'round'\n        },\n        paint: {\n            'line-color': 'rgb(22,200,200)',\n            'line-width': 4\n        }\n    },\n    containerLabel: {\n        layout: {\n            'text-field': ['get', 'waypoint_index'],\n            'text-font': ['Open Sans Regular', 'Arial Unicode MS Bold'],\n            'text-size': 12\n        },\n        paint: {\n            'text-color': '#6F6F6F'\n        }\n    },\n    containers: {\n        layout: {},\n        paint: {\n            'circle-radius': 10,\n            'circle-color': {\n                property: 'waste_distance',\n                stops: [\n                    [0, 'rgb(4,252,35)'],\n                    [50, 'rgb(255,250,6)'],\n                    [100, 'rgb(247,0,0)']\n                ]\n            }\n        }\n    }\n}\n\nconst Map = () => {\n    const [map, setMap] = useState();\n    const [popup, setPopup] = useState();\n    const [containers, setContainers] = useState([]);\n    const [containersStops, setContainersStops] = useState([]);\n    const [routeInfo, setRouteInfo] = useState();\n    const [loading, setLoading] = useState(false);\n    const [token, setToken] = useState();\n    const mapContainer = useRef(null);\n\n    useEffect(() => {\n        mapboxgl.accessToken = config.mapboxAccessToken\n        const initializeMap = ({ setMap, mapContainer }) => {\n            const map = new mapboxgl.Map({\n                container: mapContainer.current,\n                style: \"mapbox://styles/mapbox/light-v10\", // stylesheet location\n                center: [12.52489, 55.68168],\n                zoom: 13,\n                attributionControl: false\n            });\n\n            map.on(\"load\", () => {\n                setMap(map);\n                map.resize();\n\n                map.addControl(new MapboxTraffic(), 'top-left');\n\n                map.on('click', 'containers', e => {\n                    if (popup) {\n                        popup.remove();\n                        setPopup(null)\n                    }\n\n                    map.getCanvas().style.cursor = 'pointer';\n                    addPopup(map, <Popup data={e.features[0].properties} />, e.lngLat)\n                });\n\n\n                map.on('mouseenter', 'containers', e => {\n                    map.getCanvas().style.cursor = 'pointer';\n                });\n\n                map.on('mouseleave', 'containers', () => {\n                    map.getCanvas().style.cursor = '';\n                });\n            });\n        };\n\n        if (!map) initializeMap({ setMap, mapContainer });\n\n    }, [map, popup]);\n\n    // get containers after Auth\n    useEffect(()=> {\n        if(token) {\n            localStorage.setItem('waste_jwt', token)\n            getContainers(token)\n        }\n    }, [token])\n\n    // Update route and waypoints when containers are filtered\n    useEffect(() => {\n        if (map) {\n            removeLayers(map, ['containers', 'containersLabel', 'route'])\n        }\n\n        // filter containers based on slider setting\n        let filtered = containers.filter(i => i.include === true)\n\n        if (filtered.length > 0) {\n            // add containers to map\n            let containerFeatures = toGeoJSON(filtered, 'lat', 'lng')\n            removeLayers(map, 'containers')\n            addLayer(map, 'containers', 'circle', containerFeatures, layerStyles.containers.layout, layerStyles.containers.paint)\n\n            // fetch route\n            let locations = filtered.map(i => [i.lng, i.lat])\n            let route = getRoute(map, locations)\n\n            // add waypoint index to constainers\n            route.then(([waypoints, route]) => {\n\n                // Update route\n                addLayer(map, 'route', 'line', route, layerStyles.route.layout, layerStyles.route.paint)\n\n                // Join containers and route waypoints based on nearest and update map\n                let joined = filtered.map(i => {\n                    let nearest = nearestPoint(point([i.lng, i.lat], { ...i }), waypoints)\n                    return { ...i, waypoint_index: nearest.properties.waypoint_index, location: [i.lng, i.lat] }\n                })\n                setContainersStops(joined)\n                addLayer(map, 'containersLabel', 'symbol', toGeoJSON(joined, 'lat', 'lng'), layerStyles.containerLabel.layout, layerStyles.containerLabel.paint)\n            })\n        } \n    }, [containers])\n\n    const addPopup = (map, el, lngLat) => {\n        const placeholder = document.createElement('div');\n        ReactDOM.render(el, placeholder);\n\n        let _popup = new mapboxgl.Popup({ closeButton: true })\n            .setDOMContent(placeholder)\n            .setLngLat(lngLat)\n            .addTo(map);\n\n        setPopup(_popup)\n\n        return _popup\n    }\n\n    const waypointListItemClick = location => {\n        map.flyTo({\n            center: location,\n            zoom: 16\n        });\n    }\n\n    const waypointListItemEnter = feature => {\n        if (popup) {\n            popup.remove()\n            setPopup(null)\n        }\n\n        addPopup(map, <Popup data={feature} />, feature.location)\n\n        map.flyTo({\n            center: feature.location,\n        });\n    }\n\n    const waypointListItemLeave = () => {\n        popup.remove()\n        setPopup(null)\n    }\n\n    const authenticate = login => {\n        axios.post(config.wasteControl.url + '/login', {\n            username: login.user,\n            password: login.password\n        })\n            .then(response => setToken(response.data.token))\n            .catch(response => console.log(response))\n    }\n\n    const getContainers = (jwt) => {\n        setLoading(true)\n        axios.get(config.wasteControl.url + '/containers', { params: {}, headers: { 'Authorization': 'Bearer ' + jwt } })\n            .then(res => {\n                let cnt = res.data.map(i => {\n                    return { ...i, include: true }\n                })\n                setContainers(cnt);\n                setLoading(false)\n            }).catch(error => {\n                console.log(error);\n            });\n    }\n\n    const getRoute = (map, locations) => {\n        setLoading(true)\n        let url = `${config.osrm.url}/trip/v1/driving/${config.osrm.origin};${locations.join(';')}?roundtrip=true&geometries=geojson&overview=full`\n\n        return axios.get(url).then(res => {\n\n            // route info\n            let distance = Math.round((res.data.trips[0].distance / 1000) * 10) / 10\n            let num = res.data.trips[0].duration / 60\n            let duration = `${Math.floor(num / 60)} h ${Math.round(num % 60)} min`\n            setRouteInfo({ stops: res.data.waypoints.length - 1, \"distance\": distance, \"duration\": duration })\n\n            let properties = res.data.waypoints.map(item => {\n                return {\n                    ...item,\n                    index: item.waypoint_index + 1\n                }\n            })\n\n            let waypoints = {\n                type: \"FeatureCollection\",\n                features: properties.map((item) => {\n                    let feature = {\n                        'type': 'Feature',\n                        'geometry': {\n                            'type': 'Point',\n                            'coordinates': item.location\n                        },\n                        'properties': {\n                            ...item\n                        }\n                    }\n                    return feature\n                })\n            }\n\n            let route = res.data.trips[0].geometry\n            setLoading(false)\n\n            return [waypoints, route]\n\n        })\n    }\n\n    const toGeoJSON = (data, lat, lng) => {\n        let features = data.map(i => {\n            let feature = {\n                'type': 'Feature',\n                'geometry': {\n                    'type': 'Point',\n                    'coordinates': [i[lng], i[lat]]\n                },\n                'properties': {\n                    ...i\n                }\n            }\n            return feature\n        })\n\n        return { type: \"FeatureCollection\", features: features }\n    }\n\n    const addLayer = (map, id, type, data, layout = {}, paint = {}) => {\n        \n        let layers = map.getStyle().layers;\n        // Find the index of the first symbol layer in the map style\n        let firstSymbolId;\n        for (let i = 0; i < layers.length; i++) {\n            if (layers[i].type === 'symbol') {\n                firstSymbolId = layers[i].id;\n                break;\n            }\n        }\n\n        map.addSource(id, {\n            \"type\": \"geojson\",\n            \"data\": data\n        });\n\n        map.addLayer({\n            'id': id,\n            'type': type,\n            'source': id,\n            'layout': layout,\n            'paint': paint\n        }, type === 'line' ? firstSymbolId : null) // place lines below labels\n    }\n\n    const removeLayers = (map, layers) => {\n        if (Array.isArray(layers)) {\n            layers.forEach(id => {\n                if (map.getSource(id)) {\n                    map.removeLayer(id)\n                    map.removeSource(id)\n                }\n            })\n        } else {\n            if (map.getSource(layers)) {\n                map.removeLayer(layers)\n                map.removeSource(layers)\n            }\n        }\n\n    }\n\n    const sighInHandler = (login) => {\n        authenticate(login)\n    }\n\n    let timer\n    const filterContainersHandler = (min, max) => {\n        if (timer) clearTimeout(timer)\n        timer = setTimeout(() => {\n            let filtered = containers.map(i => {\n                return i.waste_distance >= min && i.waste_distance <= max ? { ...i, include: true } : { ...i, include: false }\n            })\n            setContainers(filtered)\n        }, 300);\n\n    }\n\n    return (\n        <div>\n            <SignIn clicked={sighInHandler} />\n            <div ref={el => (mapContainer.current = el)} style={styles} >\n                {loading ? <Loading /> : null}\n                {routeInfo ? <RouteInfo stops={routeInfo.stops} distance={routeInfo.distance} duration={routeInfo.duration} /> : null}\n                {containersStops.length > 0 ? <WaypointList waypoints={containersStops} entered={waypointListItemEnter} leaved={waypointListItemLeave} clicked={waypointListItemClick} /> : null}\n                <TrashSlider changed={filterContainersHandler} />\n            </div>\n        </div>\n    );\n};\n\nexport default Map;","import React from 'react';\nimport './App.css';\n\nimport Navbar from './components/Navbar'\nimport Infobox from './components/Infobox'\nimport Map from './components/Map'\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <Navbar />\n      <Infobox />\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}